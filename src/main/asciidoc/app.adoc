:toc: auto
:toclevels: 3
:sectnums:
:sectnumlevels: 3
:source-highlighter: highlightjs
:app: Notepad application

= {app}

<<<

== Introduction

This document explains what {app} is and what it is not. The sections below describe the intentions behind {app}, boring technical details and fancy diagrams.

=== Goals

Making notes is crucial. It's a well-known fact that 98.37611% of the people who don't make any notes forget about things and miss opportunities. {app} addresses this problem by providing unbelievably ultimate functionality:

* Creating the notes
* Retrieving the notes
* Updating the notes
* Deleting the notes

The {app} team firmly believes that our application makes the world better. Here's what the application looks like:

image::{snippetsDir}/ScreenshotTest/documentScreenshot/main.png[]

Isn't this application really nice?

<<<

=== Technical overview

{app} is a web application that exposes all its functionality via REST API. It uses Java and Spring as a foundation, and HSQLDB as a reliable production-grade data store.

image::tech-stack.svg[Tech Stack, 450, 450, align="center"]

A typical request is handled like this:

[plantuml, request-handling-pipeline, format="svg", align="center"]
----
@startuml

scale 450x450

title Request handling pipeline

actor Client

box "Application" #fff
    participant API
    participant Service
end box

note over Client
    Client wants
    to make a request
end note
Client -> API : Please do this thing for me
API -> Service : This guy wants us to do this thing
note over Service
    omg...
    a request...
    again...
end note
API <-- Service : OK, tell them it's done
Client <-- API : It's done
note over Client
    Client is happy
end note

@enduml
----

<<<

== Back end classes

This sections describes how {app} is organized in terms of back end packages and classes. All classes are logically organized into packages:

* Controllers - API endpoints implementation.
* Services - business logic implementation.
* Repositories - data access implementation.

[plantuml, class-diagram, svg]
----
include::{snippetsDir}/DocTest/documentClasses/classDiagram.puml[]
----

See how controllers never depend directly on data access layer.

<<<

=== Controllers

This section describes {app} API facade classes.

include::{snippetsDir}/DocTest/documentClasses/controllers.adoc[]

<<<

=== Services

This section describes {app} service layer classes.

include::{snippetsDir}/DocTest/documentClasses/services.adoc[]

<<<

=== Repositories

This section describes {app} data access layer classes.

include::{snippetsDir}/DocTest/documentClasses/repositories.adoc[]

<<<

== Back end transactions

This section describes {app}'s transactions.

=== Create note transaction
[plantuml, create-note-sd, svg]
----
include::{snippetsDir}/TransactionTest/documentCreateNote/sequenceDiagram.puml[]
----

=== Update note transaction
[plantuml, update-note-sd, svg]
----
include::{snippetsDir}/TransactionTest/documentUpdateNote/sequenceDiagram.puml[]
----

<<<

=== Delete note transaction
[plantuml, delete-note-sd, svg]
----
include::{snippetsDir}/TransactionTest/documentDeleteNote/sequenceDiagram.puml[]
----

=== Get one note transaction
[plantuml, get-one-note-sd, svg]
----
include::{snippetsDir}/TransactionTest/documentGetNote/sequenceDiagram.puml[]
----

<<<

=== Get all notes transaction
[plantuml, get-all-notes-sd, svg]
----
include::{snippetsDir}/TransactionTest/documentGetAllNotes/sequenceDiagram.puml[]
----

<<<

== Front end classes

This sections describes how {app} is organized in terms of front end classes.

=== Class diagram

[plantuml, fe-class-diagram, svg]
----
include::{snippetsDir}/FrontEndDocTest/documentClasses/classDiagram.puml[]
----

Is it not a nice diagram?

<<<

=== Classes

include::{snippetsDir}/FrontEndDocTest/documentClasses/classes.adoc[]

<<<

== Workflows

=== Creating a note

Making notes is crucial. Let's get started with an empty {app}, where there are no notes at all. See how empty it is. It is up to us to create the very first note.

image::{snippetsDir}/ScreenshotTest/documentCreateNoteScenario/1.png[]

To do so, we first type note text into a text box:

image::{snippetsDir}/ScreenshotTest/documentCreateNoteScenario/2.png[]

After it, we click the "Create" button. And once we do that, a new note should appear on the list of notes:

image::{snippetsDir}/ScreenshotTest/documentCreateNoteScenario/3.png[]

Done.

<<<

== Front/Back end sequence diagrams

=== Loading notes

The following describes how "load notes" transaction works on both back- and front-end.

[plantuml, febe-load-notes-diagram, svg]
----
include::{snippetsDir}/AdvancedTransactionTest/describeLoadNotesTransaction/sequenceDiagram.puml[]
----

See how front end initiates the transaction and back end provides the data to front end.

The End.
